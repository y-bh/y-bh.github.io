<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="">
  <title>SpringMVC1 | 青い栞</title>
  <meta name="author" content="FunnyLs" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="" />
  
  <meta name="description" content="概要本文章基于Spring4.x版本的SpringMVC,源码上与Spring5会有些许不同  Spring为展现层提供的基于MVC设计理念的优秀的Web框架，是目前最主流的MVC框架之一 SpringMVC通过一套MVC注解，让POJO成为处理请求的控制器，而无需实现任何接口 采用了松散耦合可插拔组件结构，比其他 MVC 框架更具扩展性和灵活性  mvc在b&#x2F;s系统下的应用：  SpringMV">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC1">
<meta property="og:url" content="http://example.com/2021/05/15/SpringMVC1/index.html">
<meta property="og:site_name" content="青い栞">
<meta property="og:description" content="概要本文章基于Spring4.x版本的SpringMVC,源码上与Spring5会有些许不同  Spring为展现层提供的基于MVC设计理念的优秀的Web框架，是目前最主流的MVC框架之一 SpringMVC通过一套MVC注解，让POJO成为处理请求的控制器，而无需实现任何接口 采用了松散耦合可插拔组件结构，比其他 MVC 框架更具扩展性和灵活性  mvc在b&#x2F;s系统下的应用：  SpringMV">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/null">
<meta property="article:published_time" content="2021-05-14T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-16T10:32:45.681Z">
<meta property="article:author" content="FunnyLs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/null">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-blue.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>档案馆</a></li>
                                    
                                
                                    
                                        <li><a href="/friends/"></a></li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-link"></i>链接</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://candinya.com">作者博客</a></li>
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://github.com/Candinya/Kratos-Rebirth">项目链接</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">青い栞</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>青い栞</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        <section class="col-md-8">
            <article>
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center">SpringMVC1</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><i class="fa fa-calendar"></i> 2021-05-15</li>
                <li><i class="fa fa-user"></i> 作者 FunnyLs</li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~23.35K
                    
                    字
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                本文最后编辑于 <time datetime="1621161165681"></time> 前，其中的内容可能需要更新。
            </div>
            
                <div class="kratos-post-inner-toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">概要</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC-Hello-World"><span class="toc-number">1.1.</span> <span class="toc-text">SpringMVC-Hello World</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestMapping%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82"><span class="toc-number">2.</span> <span class="toc-text">@RequestMapping映射请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E3%80%81%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E6%88%96%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">2.1.</span> <span class="toc-text">映射请求参数、请求方法或请求头</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84%E5%85%B6%E4%BB%96%E5%B1%9E%E6%80%A7"><span class="toc-number">2.1.1.</span> <span class="toc-text">RequestMapping的其他属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#method"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">method</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#params"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">params</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#headers"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">headers</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#consumes"><span class="toc-number">2.1.1.4.</span> <span class="toc-text">consumes</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#produces"><span class="toc-number">2.1.1.5.</span> <span class="toc-text">produces</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestMapping%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%EF%BC%88Ant%E9%A3%8E%E6%A0%BC%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">@RequestMapping模糊匹配（Ant风格）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">映射请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%AD%BE%E5%90%8D"><span class="toc-number">3.1.</span> <span class="toc-text">请求处理方法签名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PathVariable-%E6%98%A0%E5%B0%84URL%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">3.2.</span> <span class="toc-text">@PathVariable-映射URL绑定的占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestParam-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">3.3.</span> <span class="toc-text">@RequestParam-获取请求参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestHeader-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%8A%A5%E5%A4%B4%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-number">3.4.</span> <span class="toc-text">@RequestHeader-获取请求报头的属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieValue-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84Cookie%E5%80%BC"><span class="toc-number">3.5.</span> <span class="toc-text">@CookieValue-获取请求中的Cookie值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.6.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8POJO%E5%AF%B9%E8%B1%A1%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">3.7.</span> <span class="toc-text">使用POJO对象获取请求参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FAPI%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0"><span class="toc-number">3.8.</span> <span class="toc-text">使用原生API作为参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">处理模型数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ModelAndView"><span class="toc-number">4.1.</span> <span class="toc-text">ModelAndView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-amp-Model"><span class="toc-number">4.2.</span> <span class="toc-text">Map&amp;Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SessionAttributes"><span class="toc-number">4.3.</span> <span class="toc-text">@SessionAttributes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ModelAttribute"><span class="toc-number">4.4.</span> <span class="toc-text">ModelAttribute</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.1.</span> <span class="toc-text">全字段更新问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">视图解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">5.1.</span> <span class="toc-text">视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">5.2.</span> <span class="toc-text">视图解析器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forward%E6%8C%87%E5%AE%9A%E8%BD%AC%E5%8F%91%E6%93%8D%E4%BD%9C"><span class="toc-number">5.3.</span> <span class="toc-text">forward指定转发操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redirect%E6%8C%87%E5%AE%9A%E9%87%8D%E5%AE%9A%E5%90%91%E6%93%8D%E4%BD%9C"><span class="toc-number">5.4.</span> <span class="toc-text">redirect指定重定向操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jstlView%E4%BE%BF%E6%8D%B7%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">5.5.</span> <span class="toc-text">jstlView便捷国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE-amp-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">5.6.</span> <span class="toc-text">自定义视图&amp;视图解析器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RESTful-SpringMVC-CRUD"><span class="toc-number">6.</span> <span class="toc-text">RESTful SpringMVC CRUD</span></a></li></ol>
                </div>
            
            <hr />
            <h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>本文章基于Spring4.x版本的SpringMVC,源码上与Spring5会有些许不同</p>
<ul>
<li>Spring为展现层提供的基于MVC设计理念的优秀的Web框架，是目前最主流的MVC框架之一</li>
<li>SpringMVC通过一套MVC注解，让POJO成为处理请求的控制器，而无需实现任何接口</li>
<li>采用了松散耦合可插拔组件结构，比其他 MVC 框架更具扩展性和灵活性</li>
</ul>
<p><strong>mvc在b/s系统下的应用：</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/g67c3F"><img src="https://z3.ax1x.com/2021/05/15/g67c3F.png" alt="g67c3F.png"></a></p>
<p><strong>SpringMVC原理流程图：</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/g67gc4"><img src="https://z3.ax1x.com/2021/05/15/g67gc4.png" alt="g67gc4.png"></a></p>
<ol>
<li><p>前端控制器 DispatcherServlet</p>
<p>作用：接收请求，响应，也是中央转发器处理器映射器</p>
</li>
<li><p>HandlerMapping</p>
<p>作用：根据url查找Handler</p>
</li>
<li><p>处理器适配器 HandlerAdapter</p>
<p>作用：按照特定规则去执行Handler，规则即HandlerAdapter要求的规则</p>
<p>注意：编写Handler时需要按HandlerAdapter要求去编写，这样适配器才可以去正确执行Handler</p>
</li>
<li><p>视图解析器 ViewResolver</p>
<p>作用：根据逻辑视图解析成真正的视图（view）</p>
</li>
<li><p>视图 View</p>
<p>View 是一个接口，实现类支持不同的view类型（jsp，FreeMarker，pdf，excel…)</p>
</li>
</ol>
<h3 id="SpringMVC-Hello-World"><a href="#SpringMVC-Hello-World" class="headerlink" title="SpringMVC-Hello World"></a>SpringMVC-Hello World</h3><p>步骤：</p>
<ol>
<li><p>加入jar包</p>
<ul>
<li>commons-logging-1.1.3.jar</li>
<li>spring-aop-4.0.0.RELEASE.jar</li>
<li>spring-beans-4.0.0.RELEASE.jar</li>
<li>spring-context-4.0.0.RELEASE.jar</li>
<li>spring-core-4.0.0.RELEASE.jar</li>
<li>spring-expression-4.0.0.RELEASE.jar</li>
<li>spring-web-4.0.0.RELEASE.jar</li>
<li>spring-webmvc-4.0.0.RELEASE.jar</li>
</ul>
</li>
<li><p>在web.xml中配置DispatcherServlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloworld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springXML配置文件名<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloworld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-patt</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-patt</span>&gt;<span class="name">ern</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>加入Spring MVC的配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置自动扫描的包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ybh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置视图解析器:视图名称解析器：将视图逻辑名解析为: /WEB-INF/pages/&lt;viewName&gt;.jsp--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>编写处理请求的处理器，并标记为处理器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloworld</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;helloworld...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>编写视图</p>
</li>
</ol>
<h2 id="RequestMapping映射请求"><a href="#RequestMapping映射请求" class="headerlink" title="@RequestMapping映射请求"></a>@RequestMapping映射请求</h2><ul>
<li><p>Spring MVC使用@RequestMapping注解为控制器指定可以处理哪些 URL 请求</p>
</li>
<li><p>在控制器的类定义及方法定义处都可标注</p>
<p>类定义处：为当前类的所有方法准备一个基准路径</p>
<p>方法处：提供进一步的细分映射信息。相对于类定义处的 URL。若类定义处未标注 @RequestMapping，则方法处标记的 URL 相对于 WEB 应用的根目录</p>
</li>
<li><p>DispatcherServlet 截获请求后，就通过控制器上 @RequestMapping 提供的映射信息确定请求所对应的处理方法。</p>
</li>
</ul>
<h3 id="映射请求参数、请求方法或请求头"><a href="#映射请求参数、请求方法或请求头" class="headerlink" title="映射请求参数、请求方法或请求头"></a>映射请求参数、请求方法或请求头</h3><ul>
<li>@RequestMapping 除了可以使用<strong>请求</strong> <strong>URL</strong> 映射请求外，<strong>还可以使用请求方法、请求参数及请求头映射请求</strong></li>
</ul>
<h4 id="RequestMapping的其他属性"><a href="#RequestMapping的其他属性" class="headerlink" title="RequestMapping的其他属性"></a>RequestMapping的其他属性</h4><h5 id="method"><a href="#method" class="headerlink" title="method"></a>method</h5><p>限定请求方式：GET、POST</p>
<p>例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只接受这种类型的请求，默认是任何请求都可以</span></span><br><span class="line">method=RequestMethod.POST</span><br></pre></td></tr></table></figure>

<h5 id="params"><a href="#params" class="headerlink" title="params"></a>params</h5><p>规定请求参数</p>
<p>params:和headers支持简单表达式</p>
<ul>
<li>param1：表示请求必须包含名为param1的请求参数<pre><code> 例：params =&#123;&quot;username&quot;&#125;。
</code></pre>
表示发送请求的时候必须带上一个名为username的参数，否则会404报错。</li>
<li>！param1:表示请求不能包含名为param1的请求参数<pre><code>  例：params !=&#123;&quot;username&quot;&#125;。
</code></pre>
表示发送请求的时候不能带上一个名为username的参数</li>
<li>param1!=value1:表示请求包含名为param1的请求参数，但其值不能为value1<pre><code>  例：params=&#123;&quot;username！=value&quot;&#125;。
</code></pre>
 表示发送请求的时候，携带的username值必须不是123（不带username或者username的值不是value）</li>
<li>{“param1=value1”,”param2”}:请求必须包含名为param1和param2的请求参数<pre><code>  例：params=&#123;&quot;username!=123&quot;,&quot;pwd&quot;,&quot;!age&quot;&#125;
</code></pre>
 表示请求参数必须满足：username不是123，必须有pwd的值，不能有age</li>
</ul>
<h5 id="headers"><a href="#headers" class="headerlink" title="headers"></a>headers</h5><p>使用User-Agent限制浏览器访问</p>
<h5 id="consumes"><a href="#consumes" class="headerlink" title="consumes"></a>consumes</h5><p>只接受内容类型是哪种的请求，规定请求头中的Content-Type</p>
<h5 id="produces"><a href="#produces" class="headerlink" title="produces"></a>produces</h5><p>告诉浏览器返回的内容类型是什么，给响应头中加上Content-Type:text/html;charset=utf-8</p>
<h3 id="RequestMapping模糊匹配（Ant风格）"><a href="#RequestMapping模糊匹配（Ant风格）" class="headerlink" title="@RequestMapping模糊匹配（Ant风格）"></a>@RequestMapping模糊匹配（Ant风格）</h3><p>URL地址可以写模糊的通配符</p>
<table>
<thead>
<tr>
<th>通配符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>？</td>
<td>能代替一个字符</td>
</tr>
<tr>
<td>*</td>
<td>能代替多个字符，和一层路径</td>
</tr>
<tr>
<td>**</td>
<td>能代替多层路径</td>
</tr>
</tbody></table>
<p>例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/antTest01&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">antTest01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;antTest01...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//?匹配一个字符,0个多个都不行</span></span><br><span class="line"><span class="comment">//模糊和精确多个匹配情况下，精确优先</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/antTest0?&quot;)</span></span><br><span class="line"><span class="comment">//*匹配任意多个字符</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/antTest0*&quot;)</span></span><br><span class="line"><span class="comment">//*匹配一层路径</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/a/*/antTest01&quot;)</span></span><br><span class="line"><span class="comment">//**匹配多层路径</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/a/**/antTest01&quot;)</span></span><br></pre></td></tr></table></figure>

<h2 id="映射请求参数"><a href="#映射请求参数" class="headerlink" title="映射请求参数"></a>映射请求参数</h2><h3 id="请求处理方法签名"><a href="#请求处理方法签名" class="headerlink" title="请求处理方法签名"></a>请求处理方法签名</h3><ul>
<li><p>Spring MVC 通过分析处理方法的签名，将 HTTP 请求信息绑定到处理方法的相应参数中</p>
</li>
<li><p>Spring MVC 对控制器处理方法签名的限制是很宽松的，几乎可以按喜欢的任何方式对方法进行签名</p>
</li>
<li><p>必要时可以对方法及方法参数标注相应的注解（ @PathVariable 、@RequestParam、@RequestHeader 等）、Spring MVC 框架会将 HTTP 请求的信息绑定到相应的方法入参中，并根据方法的返回值类型做出相应的后续处理。</p>
</li>
</ul>
<h3 id="PathVariable-映射URL绑定的占位符"><a href="#PathVariable-映射URL绑定的占位符" class="headerlink" title="@PathVariable-映射URL绑定的占位符"></a>@PathVariable-映射URL绑定的占位符</h3><ul>
<li>带占位符的URL是Spring3.0新增的功能，该功能在SprngMVC向REST目标挺进发展过程中具有里程碑的意义</li>
<li>通过 @PathVariable 可以将 URL 中占位符参数绑定到控制器处理方法的入参中：URL 中的 {xxx} 占位符可以通过 @PathVariable(“xxx”) 绑定到操作方法的入参中。</li>
</ul>
<p>例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">UserDao.delete(id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;redirect:/user/list.action&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RequestParam-获取请求参数值"><a href="#RequestParam-获取请求参数值" class="headerlink" title="@RequestParam-获取请求参数值"></a>@RequestParam-获取请求参数值</h3><p>在处理方法参数处使用 @RequestParam 可以把请求参数传递给请求方法</p>
<ul>
<li>value:参数名</li>
<li>required:是否必须。默认为true，表示请求参数中必须包含对应的参数，若不存在，将抛出异常</li>
<li>defaultValue:默认值，没带参数默认为null</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestParam(&quot;user&quot;)</span>String username;等同于username=request.getParameter(<span class="string">&quot;user&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>对于路径/book/{user}?user=admin</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestParam(&quot;user&quot;)</span><span class="comment">//获取?后的值：?user=admin</span></span><br><span class="line"><span class="meta">@PathVariable(&quot;user&quot;)</span><span class="comment">//获取路径中的值：/book/&#123;user&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="RequestHeader-获取请求报头的属性值"><a href="#RequestHeader-获取请求报头的属性值" class="headerlink" title="@RequestHeader-获取请求报头的属性值"></a>@RequestHeader-获取请求报头的属性值</h3><ul>
<li>请求头包含了若干个属性，服务器可据此获知客户端的信息，<strong>通过 @RequestHeader 即可将请求头中的属性值绑定到处理方法的参数中</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestHeader</span>：获取请求头中某个key的值</span><br><span class="line">Web中：request.getHeader(<span class="string">&quot;User-Agent&quot;</span>)</span><br><span class="line">SpringMVC中：<span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span>String userAgent</span><br><span class="line">如果请求头中没有这个值就会报错</span><br></pre></td></tr></table></figure>

<h3 id="CookieValue-获取请求中的Cookie值"><a href="#CookieValue-获取请求中的Cookie值" class="headerlink" title="@CookieValue-获取请求中的Cookie值"></a>@CookieValue-获取请求中的Cookie值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">以前的操作获取某个cookie：</span><br><span class="line">     Cookie[] cookies=request.getCookies();</span><br><span class="line">     <span class="keyword">for</span>(Cookie c:cookies)&#123;</span><br><span class="line">         <span class="keyword">if</span>(c.getName().equals(<span class="string">&quot;JSESSIONID&quot;</span>))&#123;</span><br><span class="line">             String cv=c.getValue();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">现在：</span><br><span class="line"><span class="meta">@CookieValue(value=&quot;JSESSIONID&quot;,required = false)</span>String jid</span><br></pre></td></tr></table></figure>

<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle01&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hanle02</span><span class="params">(<span class="meta">@RequestParam(value=&quot;user&quot;,required = false,defaultValue = &quot;默认值&quot;)</span>String username,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="meta">@RequestHeader(value = &quot;error&quot;,required = false,defaultValue = &quot;Header默认值&quot;)</span> String userAgent,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="meta">@CookieValue(value=&quot;JSESSIONID&quot;,required = false)</span>String jid)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;这个变量的值：&quot;</span>+username);</span><br><span class="line">    System.out.println(<span class="string">&quot;请求头中浏览器的信息：&quot;</span>+userAgent);</span><br><span class="line">    System.out.println(<span class="string">&quot;cookie中的jid的值&quot;</span>+jid);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用POJO对象获取请求参数值"><a href="#使用POJO对象获取请求参数值" class="headerlink" title="使用POJO对象获取请求参数值"></a>使用POJO对象获取请求参数值</h3><ul>
<li>Spring MVC <strong>会按请求参数名和</strong> <strong>POJO</strong> <strong>属性名进行自动匹配，自动为该对象填充属性值</strong>。<strong>支持级联属性</strong></li>
</ul>
<p>SpringMVC会自动封装Book的属性值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">(Book book)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我要保存的图书:&quot;</span>+book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>提交的数据可能会乱码：</p>
<p>请求乱码：</p>
<ul>
<li><p>GET请求：</p>
<p>改Server.xml，在8080端口处添加：URIEncoding=”UTF-8”</p>
</li>
<li><p>POST请求：</p>
<p>在第一次获取请求参数之前设置</p>
<p>request.setCharacterEncoding(“UTF-8”);</p>
</li>
</ul>
<p>响应乱码：</p>
<ul>
<li>response.setContentType(“text.html;charset=utf-8”)</li>
</ul>
<h3 id="使用原生API作为参数"><a href="#使用原生API作为参数" class="headerlink" title="使用原生API作为参数"></a>使用原生API作为参数</h3><p>SpringMVC可以直接在参数上写原生API</p>
<ul>
<li><p>HttpServletRequest </p>
</li>
<li><p>HttpServletResponse </p>
</li>
<li><p>HttpSession </p>
</li>
<li><p>java.security.Principal </p>
</li>
<li><p>Locale ：国际化有关的区域信息对象</p>
</li>
<li><p>InputStream </p>
<p>ServletInputStream inputStream = request.getInputStream();</p>
</li>
<li><p>OutputStream </p>
<p>ServletOutputStream outputStream = response.getOutputStream();</p>
</li>
<li><p>Reader </p>
<p>BufferedReader reader = request.getReader();</p>
</li>
<li><p>Writer</p>
<p>PrintWriter writer = response.getWriter();</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle03&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle03</span><span class="params">(HttpSession session, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;reqParam&quot;</span>,<span class="string">&quot;我是请求域中的&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;sessionParam&quot;</span>,<span class="string">&quot;我是Session域中的&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="处理模型数据"><a href="#处理模型数据" class="headerlink" title="处理模型数据"></a>处理模型数据</h2><p>SpringMVC除了在方法上原生的request和session外还能怎么样把数据带给页面?</p>
<ul>
<li>可以在方法处传入Map、或者Model或者ModelMap,给这些参数里面保存的所有数据都会放在域中，可以在页面获取</li>
</ul>
<p>关系：</p>
<ul>
<li>Map,Model,ModelMap,最终都是<strong>BindingAwareModelMap</strong>在工作：相当于给BindingAwareModelMap中保存的东西都会被放在请求域中</li>
<li>Map属于<strong>jdk</strong>中的interface</li>
<li>model属于<strong>spring</strong>中的interface</li>
<li>ModelMap属于Map旗下，是继承于LinkedHashMap的Class</li>
<li>ExtendedModelMap属于继承于ModelMap实现Model接口的Class</li>
<li>BindingAwareModelMap继承于ExtendedModelMap的Class</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/gcbjP0"><img src="https://z3.ax1x.com/2021/05/16/gcbjP0.png" alt="gcbjP0.png"></a></p>
<p>Spring MVC 提供了以下几种途径输出模型数据：</p>
<ul>
<li><strong>ModelAndView</strong>: 处理方法返回值类型为 ModelAndView 时, 方法体即可通过该对象添加模型数据</li>
<li><strong>Map</strong> <strong>及</strong> <strong>Model</strong>: 入参为 org.springframework.ui.Model、org.springframework.ui.ModelMap 或 java.uti.Map 时，处理方法返回时，Map 中的数据会自动添加到模型中。</li>
<li><strong>@SessionAttributes</strong>: 将模型中的某个属性暂存到 HttpSession 中，以便多个请求之间可以共享这个属性</li>
<li><strong>@ModelAttribute</strong>: 方法入参标注该注解后, 入参的对象就会放到数据模型中</li>
</ul>
<h3 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h3><p>控制器处理方法的返回值如果为 <strong>ModelAndView</strong>, 则其<strong>既包含视图信息，也包含模型数据信息</strong>。</p>
<p>添加模型数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MoelAndView <span class="title">addObject</span><span class="params">(String attributeName, Object attributeValue)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">ModelAndView <span class="title">addAllObject</span><span class="params">(Map&lt;String, ?&gt; modelMap)</span></span></span><br></pre></td></tr></table></figure>

<p>设置视图</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setView</span><span class="params">(View view)</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setViewName</span><span class="params">(String viewName)</span></span></span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle04&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handle04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//之前的返回值”success“即为视图名，视图解析器会最终拼串得到页面的真实地址</span></span><br><span class="line">        <span class="comment">//ModelAndView mv = new ModelAndView(&quot;success&quot;);</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ModelAndView--Test&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>结果：请求域和session域中都有值</p>
<h3 id="Map-amp-Model"><a href="#Map-amp-Model" class="headerlink" title="Map&amp;Model"></a>Map&amp;Model</h3><p>Spring MVC 在内部使用了一个 org.springframework.ui.Model 接口存储模型数据</p>
<p>步骤：</p>
<ol>
<li><strong>Spring MVC</strong> <strong>在调用方法前会创建一个隐含的模型对象作为模型数据的存储容器</strong>。</li>
<li><strong>如果方法的参数为</strong> <strong>Map</strong> <strong>或</strong> <strong>Model</strong> <strong>类型</strong>，Spring MVC 会将隐含模型的引用传递给这些参数。在方法体内，开发者可以通过这个参数对象访问到模型中的所有数据，也可以向模型中添加新的属性数据</li>
</ol>
<p>例：</p>
<p>Model</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle02&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">handle02</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Model测试&quot;</span>);</span><br><span class="line">       model.addAttribute(<span class="string">&quot;test&quot;</span>,<span class="number">404</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;Model的类型：&quot;</span>+model.getClass());</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>Map</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle03&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle03</span><span class="params">(ModelMap modelMap)</span></span>&#123;</span><br><span class="line">        modelMap.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ModelMap测试&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ModelMap的类型：&quot;</span>+modelMap.getClass());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="SessionAttributes"><a href="#SessionAttributes" class="headerlink" title="@SessionAttributes"></a>@SessionAttributes</h3><ul>
<li><strong>若希望在多个请求之间共用某个模型属性数据</strong>，则可以在控制器类上标注一个 <strong>@SessionAttributes</strong>, Spring MVC 将在模型中对应的属性暂存到 HttpSession 中</li>
<li>@SessionAttributes 除了可以通过<strong>属性名</strong>指定需要放到会话中的属性外，还可以通过模型属性的<strong>对象类型</strong>指定哪些模型属性需要放到会话中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SessionAttributes(value = &quot;msg&quot;)</span>:</span><br><span class="line">给BindingAwareModelMap中保存的数据，或者ModelAndView中的数据，同时给Session中放一份；</span><br><span class="line">    </span><br><span class="line">value指定保存数据时要给Session中放的数据的key</span><br><span class="line">value=&#123;<span class="string">&quot;msg&quot;</span>&#125;:只要保存的是这种key的数据，给Session中放一份</span><br><span class="line">types = &#123;String.class&#125;:只要保存的是这种类型的数据，给Session中也放一份</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@SessionAttributes(value = &quot;msg&quot;,types = &#123;String.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handle01&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle01</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Map测试&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;test&quot;</span>,<span class="string">&quot;MapTest&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Map的类型：&quot;</span>+map.getClass());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>并不推荐使用@SessionAttribute，可能会引发异常，给Session中放数据请使用原生API。</p>
<h3 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="ModelAttribute"></a>ModelAttribute</h3><ul>
<li><p><strong>在方法定义上使用</strong> <strong>@ModelAttribute</strong> <strong>注解：</strong>Spring MVC 在调用目标处理方法前，会先逐个调用在方法级上标注了 @ModelAttribute 的方法</p>
</li>
<li><p>在方法的参数前使用 @ModelAttribute注解：</p>
<ul>
<li><p>可以从隐含对象中获取隐含的模型数据中获取对象，再将请求参数绑定到对象中，再传入参数</p>
</li>
<li><p>将方法参数对象添加到模型中</p>
</li>
</ul>
</li>
</ul>
<h4 id="全字段更新问题"><a href="#全字段更新问题" class="headerlink" title="全字段更新问题"></a>全字段更新问题</h4><p>实际开发场景中对于修改的属性，并不是全字段修改，只会修改部分字段</p>
<ol>
<li>不修改的字段可以在页面进行展示但是不要提供修改输入框</li>
<li>为了简单，Controller直接在参数位置来写对象</li>
<li>SpringMVC为我们自动封装；（没有带的值是null）</li>
<li>如果接下来调用了一个全字段更新的dao操作；会将其他的字段可能变为null</li>
</ol>
<p><strong>全字段更新时，如何只更新页面携带数据</strong></p>
<p>方法一：</p>
<p>修改Dao，但非常麻烦</p>
<p>方法二：</p>
<ol>
<li><p>在保存对象的方法上加上@ModelAttribute,标注的方法会提前运行并把方法的运行结果放在隐含模型中，同时会使用一个key：如果@ModelAttribute(“key”)指定了，就用指定的key,如果没有指定就用返回值类型的首字母小写作为key</p>
</li>
<li><p>在更新方法中的参数前加上@ModelAttribute注解，key的值需要和保存对象的方法中保持一致。它可以让SpringMVC不创建对象，直接从中先取出保存的对象的信息</p>
</li>
<li><p>将请求中所有与对象对应的属性一一设置过来</p>
</li>
<li><p>使用刚才取出的对象，设置属性值（请求参数带了哪些值就覆盖之前的值）</p>
</li>
<li><p>带了的字段就改为携带的值，没带的字段就保持之前的值</p>
</li>
<li><p>将之前查到的，并且封装了请求参数的对象。进行保存</p>
</li>
</ol>
<p>例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute(&quot;book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Book <span class="title">MyModelAttribute</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">        Book book = <span class="keyword">new</span> Book(<span class="number">100</span>,<span class="string">&quot;西游记&quot;</span>,<span class="string">&quot;吴承恩&quot;</span>,<span class="number">98</span>,<span class="number">10</span>,<span class="number">98.5</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;数据库中查到的图书信息时：&quot;</span>+book);</span><br><span class="line">        map.put(<span class="string">&quot;book&quot;</span>,book);</span><br><span class="line">        System.out.println(<span class="string">&quot;modelAttribute方法...查询了图书并给你保存了起来...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> book;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/updateBook&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateBook</span><span class="params">(<span class="meta">@ModelAttribute(&quot;book&quot;)</span> Book book)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;页面要提交过来的图书信息:&quot;</span>+book);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="视图解析"><a href="#视图解析" class="headerlink" title="视图解析"></a>视图解析</h2><p>SpringMVC 内部最终会将返回的参数及视图名字封装成一个 <code>ModelAndView</code> 对象，这个对象包含两个部分：<code>Model</code> 是一个 <code>HashMap</code> 集合，<code>View</code> 一般则是一个 <code>String</code> 类型记录要跳转视图的名字或者是视图对象</p>
<p>SpringMVC 内部最终是借助这个 <code>ModelAndView</code> 对象里面的 <code>View</code> 来选取视图解析器，解析出视图，然后将 <code>Model</code> 里面的键值写进 <code>requestScope</code> 里面，最终呈现给客户端渲染后的视图</p>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><ul>
<li><p><strong>视图</strong>的作用是渲染模型数据，将模型里的数据以某种形式呈现给客户</p>
</li>
<li><p>为了实现视图模型和具体实现技术的解耦，Spring 在 org.springframework.web.servlet 包中定义了一个高度抽象的 <strong>View</strong> 接口</p>
</li>
<li><p><strong>视图对象由视图解析器负责实例化</strong>。由于视图是<strong>无状态</strong>的，所以他们不会有<strong>线程安全</strong>的问题</p>
</li>
</ul>
<p>常用的视图实现类</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/ggPNl9"><img src="https://z3.ax1x.com/2021/05/16/ggPNl9.png" alt="ggPNl9.png"></a></p>
<h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3><ul>
<li>SpringMVC 为逻辑视图名的解析提供了不同的策略，可以在 Spring WEB 上下文中<strong>配置一种或多种解析策略</strong>，<strong>并指定他们之间的先后顺序</strong>。每一种映射策略对应一个具体的视图解析器实现类</li>
<li>视图解析器的作用比较单一：将逻辑视图解析为一个具体的视图对象</li>
<li>所有的视图解析器都必须实现 ViewResolver 接口</li>
</ul>
<p>常用的视图解析器实现类</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/ggPsYD"><img src="https://z3.ax1x.com/2021/05/16/ggPsYD.png" alt="ggPsYD.png"></a></p>
<ul>
<li>可以选择一种视图解析器或混用多种视图解析器</li>
<li>每个视图解析器都实现了 Ordered 接口并开放出一个 order 属性，<strong>可以通过</strong> <strong>order</strong> <strong>属性指定解析器的优先顺序</strong>，<strong>order</strong> <strong>越小优先级越高</strong></li>
<li>•SpringMVC 会按视图解析器顺序的优先顺序对逻辑视图名进行解析，直到解析成功并返回视图对象，否则将抛出 ServletException 异常</li>
</ul>
<h3 id="forward指定转发操作"><a href="#forward指定转发操作" class="headerlink" title="forward指定转发操作"></a>forward指定转发操作</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * forward:转发到一个页面</span></span><br><span class="line"><span class="comment">     * /hello.jsp:转发当前项目下的hello</span></span><br><span class="line"><span class="comment">     * 一定要加上/，不加就是相对路径，容易出问题</span></span><br><span class="line"><span class="comment">     * forward:/hello.jsp</span></span><br><span class="line"><span class="comment">     * forward:前缀的转发，不会由我们配置的视图解析器拼串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handle01&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handle01&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/hello.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handle02&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handle02&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/handle01&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="redirect指定重定向操作"><a href="#redirect指定重定向操作" class="headerlink" title="redirect指定重定向操作"></a>redirect指定重定向操作</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     *重定向到hello.jsp页面</span></span><br><span class="line"><span class="comment">     *有前缀的转发和重定向操作，配置的视图解析器就不会进行拼串</span></span><br><span class="line"><span class="comment">     * 转发 forward:转发的路径</span></span><br><span class="line"><span class="comment">     * 重定向 redirect:重定向的路径</span></span><br><span class="line"><span class="comment">     *       /hello.jsp:代表就是从当前项目开始的：SpringMVC会为路径自动的拼接上项目名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *       原生的Servlet重定向/路径需要加上项目名才能成功</span></span><br><span class="line"><span class="comment">     *       responce.sendRedirect(&quot;/hello.jsp&quot;)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handle03&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handle03&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/hello.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handle04&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handle04&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/handle03&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="jstlView便捷国际化"><a href="#jstlView便捷国际化" class="headerlink" title="jstlView便捷国际化"></a>jstlView便捷国际化</h3><p>导入jstl的时候会自动创建为一个jstlView，可以快速方便的支持国际化功能</p>
<p>javaWeb国际化步骤:</p>
<ol>
<li><p>得到一个Locale对象</p>
</li>
<li><p>使用ResourceBundle绑定国际化资源文件</p>
</li>
<li><p>使用ResourceBundle.getString(“key”)；获取到国际化配置文件中的值</p>
</li>
<li><p>web页面的国际化，fmt标签库来做</p>
<p>&lt;fmt: setLocale&gt;</p>
<p>&lt;fmt:setBundle &gt;</p>
<p>&lt;fmt: message&gt;</p>
</li>
</ol>
<p>用jstlView:</p>
<ol>
<li>让Spring管理国际化资源就行</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--让SpringMVC管理国际化资源文件；配置一个资源文件管理器  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;messageSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  basename指定基础名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;i18n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>直接去页面使用&lt;fmt: message&gt;；</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;fmt:message key=<span class="string">&quot;welcomeinfo&quot;</span>/&gt;</span><br><span class="line">&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">    &lt;fmt:message key=<span class="string">&quot;username&quot;</span>/&gt;:&lt;input /&gt;&lt;br/&gt;</span><br><span class="line">    &lt;fmt:message key=<span class="string">&quot;password&quot;</span>/&gt;:&lt;input /&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&#x27;&lt;fmt:message key=&quot;loginBtn&quot;/&gt;&#x27;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="自定义视图-amp-视图解析器"><a href="#自定义视图-amp-视图解析器" class="headerlink" title="自定义视图&amp;视图解析器"></a>自定义视图&amp;视图解析器</h3><p>自定义视图和视图解析器的步骤：</p>
<ol>
<li>编写自定义的视图解析器，和视图实现类</li>
<li>视图解析器必须放在ioc容器中，让其工作，能创建出我们的自定义视图对象</li>
</ol>
<p>View层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义视图</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">implements</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回的数据的内容类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContentType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;text/html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">(Map&lt;String, ?&gt; model, HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;之前保存的数据:&quot;</span>+model);</span><br><span class="line">        httpServletResponse.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        List&lt;String&gt; video = (List&lt;String&gt;) model.get(<span class="string">&quot;video&quot;</span>);</span><br><span class="line">        httpServletResponse.getWriter().write(<span class="string">&quot;&lt;h1&gt;测试成功!&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s :video)&#123;</span><br><span class="line">           httpServletResponse.getWriter().write(<span class="string">&quot;&lt;a&gt;下载&quot;</span>+s+<span class="string">&quot;.zip&lt;/a&gt;&lt;/br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        httpServletResponse.getWriter().write(<span class="string">&quot;&quot;</span></span><br><span class="line">                +<span class="string">&quot;&lt;script type=\&quot;text/javascript\&quot; language = \&quot;JavaScript\&quot; &gt;&quot;</span></span><br><span class="line">                +<span class="string">&quot;var aEle=document.getElementByTagName(&#x27;a&#x27;);&quot;</span></span><br><span class="line">                +<span class="string">&quot;aEle.onclick=function()&#123;&quot;</span></span><br><span class="line">                +<span class="string">&quot;&#125;&quot;</span></span><br><span class="line">                +<span class="string">&quot;alert(&#x27;付费下载&#x27;)&quot;</span></span><br><span class="line">                +<span class="string">&quot;&lt;/script&gt;&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTestViewResolver</span> <span class="keyword">implements</span> <span class="title">ViewResolver</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer order=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//根据视图名返回视图对象</span></span><br><span class="line">        <span class="keyword">if</span> (viewName.startsWith(<span class="string">&quot;test:&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> MyView();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//如果不能处理返回null即可</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 改变视图解析器的优先级</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrder</span><span class="params">(Integer order)</span></span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.order=order;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controller层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义视图解析器和视图对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewResolverController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/handlePlus&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleplus</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        List&lt;String&gt; vname=<span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        List&lt;String&gt; imgname=<span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        vname.add(<span class="string">&quot;Test1&quot;</span>);</span><br><span class="line">        vname.add(<span class="string">&quot;Test2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        imgname.add(<span class="string">&quot;imgTest1&quot;</span>);</span><br><span class="line">        imgname.add(<span class="string">&quot;imgTest2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        model.addAttribute(<span class="string">&quot;video&quot;</span>,vname);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;imgs&quot;</span>,imgname);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test:/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="RESTful-SpringMVC-CRUD"><a href="#RESTful-SpringMVC-CRUD" class="headerlink" title="RESTful SpringMVC CRUD"></a>RESTful SpringMVC CRUD</h2><p>controller层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentDao departmentDao;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmps</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        Collection&lt;Employee&gt; all=employeeDao.getAll();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;emps&quot;</span>,all);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/emp/&#123;id&#125;&quot;,method=RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">        employeeDao.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询员工,来到修改页面回显</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/emp/&#123;id&#125;&quot;,method=RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmp</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.查出员工信息</span></span><br><span class="line">        Employee employee = employeeDao.get(id);</span><br><span class="line">        <span class="comment">//2.放在请求域中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;employee&quot;</span>,employee);</span><br><span class="line">        <span class="comment">//3.继续查出部门信息放在隐含模型中</span></span><br><span class="line">        Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;depts&quot;</span>,departments);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;edit&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id修改员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/emp/&#123;id&#125;&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateEmp</span><span class="params">(<span class="meta">@ModelAttribute(&quot;employee&quot;)</span> Employee employee,<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;要修改的员工&quot;</span>+employee);</span><br><span class="line">        <span class="comment">//更新保存二合一</span></span><br><span class="line">        employeeDao.save(employee);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myModelAttribute</span><span class="params">(<span class="meta">@RequestParam(value = &quot;id&quot;,required =false)</span>Integer id,Model model)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (id!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        Employee employee = employeeDao.get(id);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;employee&quot;</span>,employee);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/emp&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;要添加的员工：&quot;</span>+employee);</span><br><span class="line">        employeeDao.save(employee);</span><br><span class="line">        <span class="comment">//返回列表页面:重定向到查询所有员工的请求</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 去员工添加页面,去页面之前需要查出所有部门信息，进行展示</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toaddpage&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toAddPage</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.先查出所有部门</span></span><br><span class="line">        Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br><span class="line">        <span class="comment">//2.放在请求域中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;depts&quot;</span>,departments);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;employee&quot;</span>,<span class="keyword">new</span> Employee());</span><br><span class="line">        <span class="comment">//3.去添加页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>员工列表页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;员工列表&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;ctp&quot;</span>,request.getContextPath());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;员工列表&lt;/h1&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;ctp&#125;/scripts/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;table border=<span class="string">&quot;1&quot;</span> cellpadding=<span class="string">&quot;5&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ID&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;lastName&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;email&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;gender&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;departmentName&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Edit&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Delete&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;c:forEach items=<span class="string">&quot;$&#123;emps&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;emp&quot;</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.id&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.lastName&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.email&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.gender==0?&quot;女&quot;:&quot;男&quot;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;emp.department.departmentName&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;a href=&quot;$&#123;ctp&#125;/emp/$&#123;emp.id&#125;&quot;&gt;EDIT&lt;/a&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;a href=&quot;$&#123;ctp&#125;/emp/$&#123;emp.id&#125;&quot; class=&quot;delBtn&quot;&gt;DELETE&lt;/a&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;a href=&quot;$&#123;ctp&#125;/toaddpage&quot;&gt;添加员工&lt;/a&gt;</span><br><span class="line">&lt;form id=<span class="string">&quot;deleteForm&quot;</span> action=<span class="string">&quot;$&#123;ctp&#125;/emp/$&#123;emp.id&#125;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;DELETE&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    $(function()&#123;</span><br><span class="line">        $(<span class="string">&quot;.delBtn&quot;</span>).click(function () &#123;</span><br><span class="line">            <span class="comment">//0.确认删除</span></span><br><span class="line">            <span class="keyword">if</span> (confirm(<span class="string">&quot;确定删除吗?&quot;</span>))&#123;</span><br><span class="line">                <span class="comment">//1.改变表单的action指向</span></span><br><span class="line">                $(<span class="string">&quot;#deleteForm&quot;</span>).attr(<span class="string">&quot;action&quot;</span>,<span class="keyword">this</span>.href)</span><br><span class="line">                <span class="comment">//2.提交表单</span></span><br><span class="line">                $(<span class="string">&quot;#deleteForm&quot;</span>).submit();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>完整源码：</p>
<p>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1LhNwcejk4ymzYavdIkKD_w">https://pan.baidu.com/s/1LhNwcejk4ymzYavdIkKD_w</a><br>提取码：2333 </p>

        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://example.com/2021/05/15/SpringMVC1/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://example.com/2021/05/15/SpringMVC1/";
            const title         = "「SpringMVC1」";
            const excerpt       = `概要本文章基于Spring4.x版本的SpringMVC,源码上与Spring5会有些许不同

Spring为展现层提供的基于MVC设计理念的优秀的Web框架，是目前最主流的MVC框架之一
SpringMVC通过一套MVC注解，让PO...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    
                </div>
                <div class="pull-date">
                <span>最后编辑：2021-05-16</span>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" Spring5框架（事务）" href="/2021/04/25/Spring5框架（事务）/">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" SpringMVC2" href="/2021/05/16/SpringMVC2/">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
</article>
        </section>

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center">永远不要放弃自己的理想主义！</p>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix">
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar"></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%A6%81"><span class="toc-text">概要</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC-Hello-World"><span class="toc-text">SpringMVC-Hello World</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestMapping%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82"><span class="toc-text">@RequestMapping映射请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E3%80%81%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E6%88%96%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">映射请求参数、请求方法或请求头</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84%E5%85%B6%E4%BB%96%E5%B1%9E%E6%80%A7"><span class="toc-text">RequestMapping的其他属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#method"><span class="toc-text">method</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#params"><span class="toc-text">params</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#headers"><span class="toc-text">headers</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#consumes"><span class="toc-text">consumes</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#produces"><span class="toc-text">produces</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestMapping%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%EF%BC%88Ant%E9%A3%8E%E6%A0%BC%EF%BC%89"><span class="toc-text">@RequestMapping模糊匹配（Ant风格）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">映射请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%AD%BE%E5%90%8D"><span class="toc-text">请求处理方法签名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PathVariable-%E6%98%A0%E5%B0%84URL%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-text">@PathVariable-映射URL绑定的占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestParam-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-text">@RequestParam-获取请求参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestHeader-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%8A%A5%E5%A4%B4%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-text">@RequestHeader-获取请求报头的属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CookieValue-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84Cookie%E5%80%BC"><span class="toc-text">@CookieValue-获取请求中的Cookie值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8POJO%E5%AF%B9%E8%B1%A1%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-text">使用POJO对象获取请求参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FAPI%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0"><span class="toc-text">使用原生API作为参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-text">处理模型数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ModelAndView"><span class="toc-text">ModelAndView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-amp-Model"><span class="toc-text">Map&amp;Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SessionAttributes"><span class="toc-text">@SessionAttributes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ModelAttribute"><span class="toc-text">ModelAttribute</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98"><span class="toc-text">全字段更新问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90"><span class="toc-text">视图解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-text">视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">视图解析器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forward%E6%8C%87%E5%AE%9A%E8%BD%AC%E5%8F%91%E6%93%8D%E4%BD%9C"><span class="toc-text">forward指定转发操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redirect%E6%8C%87%E5%AE%9A%E9%87%8D%E5%AE%9A%E5%90%91%E6%93%8D%E4%BD%9C"><span class="toc-text">redirect指定重定向操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jstlView%E4%BE%BF%E6%8D%B7%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">jstlView便捷国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE-amp-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">自定义视图&amp;视图解析器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RESTful-SpringMVC-CRUD"><span class="toc-text">RESTful SpringMVC CRUD</span></a></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Error/">Error</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDBC/">JDBC</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Web/">Java Web</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ssm/">ssm</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%91%E5%B9%B4%E3%81%AE%E6%97%A5%E5%B8%B8/">少年の日常</a><span class="category-list-count">2</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.6em;">数据结构</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.6em;">算法</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/06/29/2021-06-29-10%E5%A4%A7%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/"><i class="fa  fa-book"></i> 10大常用算法</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/29/2021-6-29-%E4%BA%8C%E5%8F%89%E5%B9%B3%E8%A1%A1%E6%A0%91(AVL%E6%A0%91)/"><i class="fa  fa-book"></i> 二叉平衡树(AVL树)</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/29/2021-6-29-%E5%9B%BE/"><i class="fa  fa-book"></i> 图</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/29/2021-6-29-%E4%BA%8C%E5%8F%89%E6%8E%92%E5%BA%8F%E6%A0%91/"><i class="fa  fa-book"></i> 二叉排序树</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/29/2021-6-29-%E5%A4%9A%E8%B7%AF%E6%9F%A5%E6%89%BE%E6%A0%91/"><i class="fa  fa-book"></i> 多路查找树</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        <li><a href="mailto:1922856021@qq.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        
                        
                        
                        
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2021 青い栞 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by FunnyLs.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>const notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));</script>

    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.min.js"></script>
    </div>

<script async src="/js/candy.min.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="3204190542"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>